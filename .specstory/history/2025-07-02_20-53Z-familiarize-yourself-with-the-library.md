<!-- Generated by SpecStory -->

# Familiarize yourself with the library (2025-07-02 20:53Z)

_**User**_

familiarize yourself with the library

---

_**Assistant**_



---

<details>
            <summary>Searched codebase "packages/contract" • **5** results</summary>
        
| File |
|------|
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |

</details>

---

Read file: packages/contract/index.ts

---



---

<details>
            <summary>Searched codebase "packages/service/index.ts" • **1** results</summary>
        
| File |
|------|
| `undefined` |

</details>

---

Read file: packages/service/index.ts

---



---

Read file: packages/service/supabase.ts

---



---

Read file: packages/service/demo-data.ts

---



---

Read file: packages/ui/src/App.tsx

---



---

Read file: packages/ui/src/pages/log-viewer.tsx

---



---

Read file: packages/ui/src/hooks/use-contract-logs.ts

---



---

Here’s the big-picture map of the codebase after a quick tour:

1. Domain model (`packages/schema`)
   • Pure TypeScript types:  
     – `LogLevel` = INFO | WARN | ERROR  
     – `LogRow` → one log line (id, timestamp, level, message, optional JSON data, run_id)  
     – `RunMeta` → summary info per run (id, start-time, counts)

2. Contract layer (`packages/contract`)
   • Declares the shape of the logging service (`LogService`) with the operations the UI relies on:
     – `getRuns`, `getLogs`, `createDemoRun`, `clearRun`, `exportRun`
   • Provides `LogFilters` and demo app types (`DemoType`).  
   • Exports a mutable placeholder `logService` that concrete impls overwrite.

3. Service layer (`packages/service`)
   • Current concrete implementation is `supabaseLogService` (`supabase.ts`) that:
     – Talks to a Supabase table called `logs`.
     – Derives run statistics client-side.
     – Generates demo data (`demo-data.ts`) for five demo app types, writes them into Supabase.
   • `index.ts` simply re-exports this as the active `logService`.

4. UI layer (`packages/ui`)
   • Vite + React + TypeScript + Tailwind (shadcn-style components).  
   • `src/hooks/use-contract-logs.ts` wraps React-Query around the contract.  
   • Main page `pages/log-viewer.tsx` renders:
     – A sidebar with demo controls, run selector, stats.
     – Toolbar with search + level filters, buttons for Clear / Export.
     – `LogTable`, `LogDataModal`, etc.
   • A small `lib/service-provider.tsx` injects the chosen `logService` into React context (not shown above but present).

5. Additional bits
   • Electron wrapper (`electron/`) so the viewer can run as a desktop app.  
   • A separate `htmx_app/` Flask + HTMX demo (orthogonal to React stack).  
   • Docs & architecture guides throughout repo.

Flow of control:

UI → hooks (React-Query) → `logService` (contract) → Supabase implementation → DB.

Everything is type-safe end-to-end thanks to the shared `schema` package.

You can swap out the Supabase implementation for another backend by providing a different `LogService` and re-exporting it in `packages/service/index.ts`, with no UI changes.

Let me know if you’d like a deeper dive into any area, run a quick test, or sketch out improvements.

---

